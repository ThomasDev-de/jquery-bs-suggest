!function(t){let e={limit:10,typingInterval:400,multiple:!1,valueSeparator:",",darkMenu:!1,btnWidth:"fit-content",btnClass:"btn btn-outline-secondary",searchPlaceholderText:"Search",emptyText:"Please choose..",waitingForTypingText:"Waiting for typing",typingText:"typing..",loadingText:"Loading..",queryParams:function(t){}};function n(t){return t.closest('[id^="webcito_suggestion_"]')}function a(t){i(t,!1),t.suggest(t.data("settings")||{})}function i(t,e){let a=t.val(),i=n(t);t.insertBefore(i),i.remove(),t.val(a),t.data("init",!1),e&&t.show()}function s(t,e){let a=e.data("settings");n(e).find(".js-selected-text").html('<span class="px-2 py-1 border border-dark rounded d-inline">'+(t||a.emptyText)+"</span>")}t.fn.suggest=function(l,o){return t(this).each(function(){let r=t(this),d=null,c;if("object"==typeof l||void 0===l){let g=t.extend(!0,e,l||{});r.data("settings",g),r.data("selected",r.val().split(g.valueSeparator))}let u=function e(a){var i;let l=n(a);if(l.length)return l;let o="webcito_suggestion_"+t('[id^="webcito_suggestion_"]').length,r=t("<div>",{id:o}).insertAfter(a);a.hide(),a.appendTo(r);let d,c;return t(`            <div class="dropdown">                  <div class="form-control form-control border-dark  d-flex align-items-center" data-bs-toggle="dropdown" aria-expanded="false" style="width:${d.btnWidth}">                    <span class="js-selected-text"></span>                  </div>                  <div class="dropdown-menu ${c=(d=(i=a).data("settings")).darkMenu?"dropdown-menu-dark":""} p-0 mt-1">                    <div class="card bg-transparent border-0 m-0 w-100">                        <div class="card-header d-flex flex-nowrap align-items-center justify-content-between">                            <input autocomplete="false" type="search" class="form-control-sm flex-fill" placeholder="${d.searchPlaceholderText}">                            <button role="button" class=" btn-close ${d.darkMenu?"btn-close-white":""} ms-2 js-webcito-reset"></button>                        </div>                         <div class="card-body p-0">                        </div>                        <div class="card-footer bg-secondary text-bg-secondary p-1 fw-light fst-italic d-flex align-items-center">                            <small class="suggest-status-text">${d.waitingForTypingText}</small>                        </div>                    </div>                  </div>            </div>`).insertBefore(a),setTimeout(function(){""===r.find(".js-selected-text").text()&&s(null,a)},40),r}(r),p=u.find(".card-body"),f=u.find(".suggest-status-text"),m=u.find('[type="search"]');function v(t){f.html(t)}function h(){v(r.data("settings").loadingText),y()}function y(e=!0,n){let a=r.data("settings");null!==d&&(d.abort(),d=null);let i=e?{q:m.val()||null,limit:a.limit}:{value:n};d=t.get(r.data("bsTarget"),a.queryParams(i),function(n){n.error?r.trigger("error",[n.error]):e?(p.empty(),n.items.forEach(e=>{t("<div>",{html:`<a class="dropdown-item" href="#">${e.text}</a>`}).appendTo(p).find("a").data("item",e)}),n.items.length!==n.total?v(`showing ${n.items.length} / ${n.total} results`):v("results: "+n.items.length)):(r.val(n.id),s(n.text,r))})}if(!0!==r.data("init")&&(m.on("keyup",function(){let t=r.data("settings");clearTimeout(c),c=setTimeout(h,t.typingInterval)}),m.on("keydown",function(){let t=r.data("settings");clearTimeout(c),v(t.typingText)}),u.on("click","a.dropdown-item",function(e){e.preventDefault();let n=t(e.currentTarget),a=n.data("item");r.trigger("change",[a.id,a.text]);let i=a.id;r.val(i),s(n.html(),r)}).on("click",".js-webcito-reset",function(t){t.preventDefault(),r.val(null),m.val(null),p.empty(),s(null,r);v(r.data("settings").waitingForTypingText)}).on("hidden.bs.dropdown",".dropdown",function(){p.empty(),m.val(null);v(r.data("settings").waitingForTypingText)}).on("shown.bs.dropdown",".dropdown",function(){m.focus()}),r.data("init",!0),""!==r.val()&&y(!1,r.val())),"string"==typeof l)switch(l.toLowerCase()){case"val":let b;b=r.data("settings"),r.val(null),m.val(null),p.empty(),v(b.waitingForTypingText);let w=o;w&&""!==w?Array.isArray(w)&&w[0]:w=[],y(!1,o);break;case"destroy":i(r,!0);break;case"refresh":a(r);break;case"updateoptions":r.data("settings",t.extend(!0,r.data("settings"),o||{},e)),console.log(r.data("settings")),a(r)}return r})}}(jQuery);